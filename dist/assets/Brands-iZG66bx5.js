import{r as l,j as e}from"./index-DwftglYh.js";import{b as v,c as B,F as C,a as S}from"./index-D4vZpXvs.js";import{i as E,j as F,k as L}from"./productsApi--YTSQkNk.js";import{V as g}from"./index-BByxZPSn.js";import"./iconBase-BklN5bFW.js";function U({isOpen:f,onClose:i,brandData:a}){const[h,{isLoading:c}]=E(),[u,m]=l.useState(""),[n,x]=l.useState(null),[d,o]=l.useState(null);l.useEffect(()=>{a&&(m(a.name||""),o(a.logo||null),x(null))},[a]);const j=async()=>{try{const t=new FormData;t.append("name",u),n&&t.append("logo",n),console.log("---- Brand Update Payload ----");for(let r of t.entries())console.log(r[0],r[1]);await h({id:a._id,body:t}).unwrap(),g.success("Brand Updated Successfully"),i()}catch(t){console.error(t),g.error("Update Failed")}};return f?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white w-[400px] p-6 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Edit Brand"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:u,onChange:t=>m(t.target.value),placeholder:"Brand Name",className:"w-full border p-2 rounded-lg"}),e.jsxs("div",{className:"border-dashed border-2 rounded-lg p-4 text-center relative",children:[d?e.jsx("img",{src:d,alt:"Preview",className:"h-20 mx-auto object-contain"}):e.jsx("p",{children:"Upload Logo"}),e.jsx("input",{type:"file",onChange:t=>{const r=t.target.files[0];x(r),o(URL.createObjectURL(r))},className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:c,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:c?"Updating...":"Update"})]})]})}):null}function O(){const{data:f,isLoading:i,isError:a}=F(),h=f?.data||[],[c,{isLoading:u}]=L(),[m,n]=l.useState(!1),[x,d]=l.useState(null),[o,j]=l.useState(""),t=s=>{d(s),n(!0)},r=()=>{n(!1),d(null)},b=h.filter(s=>{const p=o.toLowerCase();return s.name?.toLowerCase().includes(p)}),y=()=>e.jsxs("div",{className:"w-40 h-36 bg-gray-200 animate-pulse rounded-xl p-4 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-20 h-6 bg-gray-300 rounded"}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-md"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-md"})]})]});if(a)return e.jsx("p",{children:"Error loading brands"});const N=async s=>{if(window.confirm("Are you sure you want to delete this Brand?"))try{await c(s).unwrap(),g.success("Category Deleted Successfully")}catch(w){g.error("Error to delete Category",w)}};return e.jsxs("div",{className:"p-6 bg-[#F8FAFC] rounded-xl border border-teal-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),e.jsx("input",{type:"text",placeholder:"Search By Brand Name",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-teal-200 text-sm focus:outline-none focus:ring-2 focus:ring-teal-300",value:o,onChange:s=>j(s.target.value)})]}),e.jsxs("button",{className:"flex items-center gap-2 bg-[#1A2550] text-white px-4 py-2 rounded-lg text-sm font-medium",children:[e.jsx(B,{size:14}),"Export"]})]}),e.jsx("div",{className:"grid md:grid-cols-6 grid-cols-2 gap-5",children:i?Array(12).fill(0).map((s,p)=>e.jsx(y,{},p)):b.map(s=>e.jsxs("div",{className:"w-40 h-36 bg-[#ECFDFB] rounded-xl p-4 flex flex-col items-center gap-3 border border-teal-100",children:[e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-2xl font-black tracking-wide",children:s.name})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(s),className:"p-2 rounded-md bg-indigo-50 text-indigo-600",children:e.jsx(C,{size:14})}),e.jsx("button",{className:"p-2 rounded-md bg-red-50 text-red-600",onClick:()=>N(s._id),disabled:u,children:e.jsx(S,{size:14})})]})]},s._id))}),e.jsx(U,{isOpen:m,onClose:r,brandData:x})]})}export{O as default};
