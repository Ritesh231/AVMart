import{j as e,b as y,r as m,y as i}from"./index-DwftglYh.js";import{F as x,a as v,b as w,c as p,d as h}from"./index-BASg2LZ3.js";import{S as C}from"./StatCard-QpygTDIK.js";import{S,R as U}from"./index-C0oQNT_P.js";import{S as F,D as T}from"./search-DPiFR_aJ.js";import{S as k,C as A}from"./sliders-horizontal-CyPAUmww.js";import"./iconBase-BklN5bFW.js";const E=[{title:"Total Users",number:"200",statement:"+12% from last Month",icon:e.jsx(x,{size:24}),variant:"special"},{title:"Newly Added",number:"20",statement:"+12% from last week",icon:e.jsx(x,{size:24}),variant:"normal"},{title:"Approved",number:"20",statement:"+12% from last week",icon:e.jsx(v,{size:24}),variant:"normal"},{title:"Rejected",number:"20",statement:"+12% from last week",icon:e.jsx(w,{size:24}),variant:"normal"}];function D(){return e.jsx("section",{className:"stat-card-sec mb-6 bg-white border-2 border-[#62CDB999] rounded-[2.5rem] p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:E.map((t,a)=>e.jsx(C,{title:t.title,number:t.number,statement:t.statement,icon:t.icon,variant:t.variant},a))})})}const L=y.injectEndpoints({tags:["Users"],endpoints:t=>({getallusers:t.query({query:()=>({url:"/api/v1/profile/all"}),providesTags:["Users"]}),updateStatus:t.mutation({query:({id:a,status:r})=>({url:`/api/v1/adminauth/profiles/${a}/status`,method:"PUT",body:{status:r}}),invalidatesTags:["Users"]}),deleteUser:t.mutation({query:a=>({url:`/api/v1/profile/delete/${a}`,method:"DELETE"}),invalidatesTags:["Users"]})})}),{useGetallusersQuery:z,useUpdateStatusMutation:R,useDeleteUserMutation:_}=L,M=[{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"rejected",label:"Rejected"}];function P(){const[t,a]=m.useState("pending"),[r,u]=m.useState(""),{data:j,isLoading:g,isError:b}=z(),d=(j?.data||[]).filter(s=>{const l=s.status===t,n=s.name?.toLowerCase().includes(r.toLowerCase())||s.contact?.includes(r)||s.shopName?.toLowerCase().includes(r.toLowerCase())||s.email?.toLowerCase().includes(r.toLowerCase());return l&&n}),[N,{isLoading:B}]=R(),[f,{isLoading:$}]=_(),c=async(s,l)=>{try{await N({id:s,status:l}).unwrap(),i.success("status updated successfully")}catch(n){i.error("Failed to Update",n)}},o=async s=>{if(window.confirm("Are you sure you want to delete this user?"))try{await f(s).unwrap(),i.success("user deleted successfully")}catch(n){i.error("Failed to delete User",n)}};return b?e.jsx("p",{children:"No User Found"}):e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"flex flex-col sm:flex-row bg-[#1E264F] p-2 my-6 rounded-xl  md:w-fit w-full shadow-lg",children:M.map(s=>e.jsxs("button",{onClick:()=>a(s.id),className:`px-6 py-3 rounded-lg flex items-center justify-center sm:justify-start
        gap-3 font-semibold transition-all duration-300
        ${t===s.id?"bg-[#00E5B0] text-white shadow-sm":"bg-white text-[#1E264F] hover:bg-opacity-90"}
        sm:ml-2 mb-2 sm:mb-0 w-full sm:w-auto
      `,children:[e.jsx("span",{className:t===s.id?"text-white":"text-[#1E264F]",children:s.icon}),s.label]},s.id))}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[e.jsx("div",{className:"w-full lg:w-[40%] md:w-[50%]",children:e.jsxs("div",{className:"flex items-center gap-2 bg-white border-2 border-brand-soft rounded-2xl p-3 focus-within:border-brand-teal transition-all",children:[e.jsx(F,{className:"text-brand-gray",size:20}),e.jsx("input",{className:"w-full bg-transparent border-none focus:ring-0 focus:outline-none text-brand-navy placeholder:text-brand-gray",onChange:s=>u(s.target.value),type:"text",placeholder:"Search By User Name and Phone no"})]})}),e.jsxs("div",{className:"flex justify-evenly gap-2 items-center",children:[e.jsx("button",{className:"bg-brand-cyan  font-semibold text-brand-navy px-3 py-3 rounded-xl flex justify-center gap-2 items-center",children:e.jsx(k,{size:20})}),e.jsxs("button",{className:"border-brand-cyan border-[1px] font-semibold text-brand-navy px-3 py-3 rounded-2xl flex justify-center gap-2 items-center",children:[e.jsx("p",{children:"Todayâ€™s"})," ",e.jsx(A,{size:20})]}),e.jsxs("button",{className:"bg-brand-navy px-6 py-3 rounded-2xl flex justify-center gap-2 items-center text-white font-bold hover:bg-opacity-90 transition-all",children:[e.jsx(T,{size:20})," Export"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl border overflow-x-auto",children:e.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[e.jsx("thead",{className:"bg-[#F1F5F9] text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3 text-left",children:"Shop Name"}),e.jsx("th",{className:"p-3 text-left",children:"Owner Name"}),e.jsx("th",{className:"p-3 text-left",children:"Location"}),e.jsx("th",{className:"p-3 text-left",children:"Contact"}),e.jsx("th",{className:"p-3 text-left",children:"Shop Type"}),e.jsx("th",{className:"p-3 text-left",children:"Joined"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsx("tbody",{children:g?Array.from({length:6}).map((s,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-28 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-40 bg-gray-200 rounded animate-pulse"})}),e.jsxs("td",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-32 bg-gray-100 rounded animate-pulse"})]}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"})]})})]},l)):d.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"8",className:"text-center py-10 text-gray-500 font-medium",children:["No users available in ",t," tab."]})}):d.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"checkbox"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.shopPhoto?e.jsx("img",{src:s.shopPhoto,alt:s.shopName,className:"w-10 h-10 rounded-md object-cover border"}):e.jsx("div",{className:"w-10 h-10 rounded-md bg-gray-200 flex items-center justify-center text-xs text-gray-500",children:"N/A"}),e.jsx("span",{className:"font-medium",children:s.shopName})]})}),e.jsx("td",{className:"p-3",children:s.name||"-"}),e.jsx("td",{className:"p-3",children:s.shopAddress}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:s.contact}),e.jsx("div",{className:"text-xs text-gray-400",children:s.email})]}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"text-sm text-black",children:s.shopType})}),e.jsx("td",{className:"p-3",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"p-3",children:[s.status==="pending"&&e.jsxs("div",{className:"flex gap-3 text-lg",children:[e.jsx(S,{size:20,className:"text-green-600 cursor-pointer",onClick:()=>c(s._id,"accepted")}),e.jsx(U,{size:20,className:"text-red-500 cursor-pointer",onClick:()=>c(s._id,"rejected")})]}),s.status==="approved"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-green-700 text-xs bg-green-100 px-3 py-1 rounded-full",children:"Approved"}),e.jsx(p,{className:"text-blue-900 cursor-pointer"}),e.jsx(h,{className:"text-red-600 cursor-pointer",onClick:()=>o(s._id)})]}),s.status==="rejected"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-red-700 text-xs bg-red-100 px-3 py-1 rounded-full",children:"Rejected"}),e.jsx(p,{className:"text-blue-900 cursor-pointer"}),e.jsx(h,{className:"text-red-600 cursor-pointer",onClick:()=>o(s._id)})]})]})]},s._id))})]})})]})}function V(){return e.jsxs("div",{className:"p-4 sm:p-6 bg-[#F8FAFC] min-h-screen ",children:[e.jsx("h1",{className:"text-xl font-semibold mb-6",children:"Users Management"}),e.jsx(D,{}),e.jsx(P,{})]})}export{V as default};
