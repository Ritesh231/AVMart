import{r as i,j as e}from"./index-DwftglYh.js";import{j as f}from"./index-BASg2LZ3.js";import{d as N}from"./index-D1CMWDxC.js";import{f as w,g as v,h as S}from"./productsApi--YTSQkNk.js";import{V as j}from"./index-BByxZPSn.js";import{a as C}from"./index-h4svzm_W.js";import{S as I,D}from"./search-DPiFR_aJ.js";import{S as F,C as E}from"./sliders-horizontal-CyPAUmww.js";import"./iconBase-BklN5bFW.js";function z({isOpen:m,onClose:c,subcategoryData:r}){const[p,{isLoading:u}]=w(),[s,o]=i.useState({name:"",categoryId:"",image:null});i.useEffect(()=>{r&&(o({name:r.name||"",categoryId:r.CategoryId||"",image:null}),h(r.image||null))},[r]);const d=t=>{const{name:l,value:b,files:a}=t.target;o(l==="image"?{...s,image:a[0]}:{...s,[l]:b})},[x,h]=i.useState(null),g=async()=>{try{const t=new FormData;t.append("name",s.name),t.append("categoryId",s.categoryId),s.image&&t.append("image",s.image),console.log("---- FormData Payload ----");for(let l of t.entries())console.log(l[0],l[1]);s.image?(console.log("Image Name:",s.image.name),console.log("Image Type:",s.image.type),console.log("Image Size (bytes):",s.image.size)):console.log("No image selected"),await p({id:r._id,body:t}).unwrap(),j.success("Subcategory Updated Successfully"),c()}catch{j.error("Update Failed")}};return m?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-[420px] p-6 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Edit Subcategory"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,placeholder:"Subcategory Name",className:"w-full border p-2 rounded-lg"}),e.jsx("input",{type:"text",name:"categoryId",value:s.categoryName,onChange:d,placeholder:"Category ID",className:"w-full border p-2 rounded-lg"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"editImage",className:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-6 cursor-pointer hover:border-indigo-500 transition",children:x?e.jsx("img",{src:x,alt:"preview",className:"h-24 object-contain"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(C,{size:36}),e.jsx("span",{className:"text-sm mt-2",children:"Click to Upload Image"})]})}),e.jsx("input",{type:"file",id:"editImage",name:"image",accept:"image/*",onChange:d,className:"hidden"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-5",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:u?"Updating...":"Update"})]})]})}):null}Array.from({length:6}).map((m,c)=>({id:"#12345",name:"Face Care",price:"450",placed:"20/12/2025",items:["/images/item1.png"],categoryname:"Online",products:"145",action:"Send to Delivery"}));function P(){const{data:m,isLoading:c,isError:r}=v(),[p,{isLoading:u}]=S(),s=m?.data||[],[o,d]=i.useState(!1),[x,h]=i.useState(null),[g,t]=i.useState(""),l=s.filter(a=>{const n=g.toLowerCase();return a.name?.toLowerCase().includes(n)||a.categoryname?.toLowerCase().includes(n)||a._id?.toLowerCase().includes(n)||a.productCount?.toString().includes(n)});if(r)return e.jsx("p",{className:"text-red-500",children:"Failed to load Subcategories"});const b=async a=>{if(window.confirm("Are you sure you want to delete this category?"))try{await p(a).unwrap(),toast.success("Category Deleted Successfully")}catch(y){toast.error("Error to delete Category",y)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[e.jsx("div",{className:"w-full lg:w-[40%] md:w-[50%]",children:e.jsxs("div",{className:"flex items-center gap-2 bg-white border-2 border-brand-soft rounded-2xl p-3 focus-within:border-brand-teal transition-all",children:[e.jsx(I,{className:"text-brand-gray",size:20}),e.jsx("input",{className:"w-full bg-transparent border-none focus:ring-0 focus:outline-none text-brand-navy placeholder:text-brand-gray",type:"text",placeholder:"Search By Subcategory name and Subcategory id",value:g,onChange:a=>t(a.target.value)})]})}),e.jsxs("div",{className:"flex justify-evenly gap-2 items-center",children:[e.jsx("button",{className:"bg-brand-cyan  font-semibold text-brand-navy px-3 py-3 rounded-xl flex justify-center gap-2 items-center",children:e.jsx(F,{size:20})}),e.jsxs("button",{className:"border-brand-cyan border-[1px] font-semibold text-brand-navy px-3 py-3 rounded-2xl flex justify-center gap-2 items-center",children:[e.jsx("p",{children:"Todayâ€™s"})," ",e.jsx(E,{size:20})]}),e.jsxs("button",{className:"bg-brand-navy px-6 py-3 rounded-2xl flex justify-center gap-2 items-center text-white font-bold hover:bg-opacity-90 transition-all",children:[e.jsx(D,{size:20})," Export"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border overflow-x-auto",children:[e.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[e.jsx("thead",{className:"bg-[#F1F5F9] text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3"}),e.jsx("th",{className:"p-3 text-left",children:"Subcategory ID"}),e.jsx("th",{className:"p-3 text-left",children:"Subcategory Name"}),e.jsx("th",{className:"p-3 text-left",children:"Image"}),e.jsx("th",{className:"p-3 text-left",children:"Category Name"}),e.jsx("th",{className:"p-3 text-left",children:"Products"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsx("tbody",{children:c?Array.from({length:6}).map((a,n)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-md animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded-xl animate-pulse"})}),e.jsx("td",{className:"p-6",children:e.jsx("div",{className:"h-4 w-10 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"})]})})]},n)):l.map(a=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"checkbox"})}),e.jsx("td",{className:"p-3 font-medium",children:a._id.slice(-5)}),e.jsx("td",{className:"p-3 font-medium",children:a.name}),e.jsx("td",{className:"p-3",children:e.jsx("img",{src:a.image,alt:"item",className:"w-8 h-8 rounded-md object-cover border"})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-xl
            bg-[#8A9FF324] border border-[#0B97ED] text-[#0B97ED] text-sm font-semibold`,children:a.categoryName})}),e.jsx("td",{className:"p-6",children:a.productCount}),e.jsx("td",{className:"p-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-1 text-blue-600",onClick:()=>{h(a),d(!0)},children:e.jsx(f,{size:18})}),e.jsx("button",{className:"p-1 text-red-600",onClick:()=>b(a._id),children:e.jsx(N,{size:18})})]})})]},a._id))})]}),e.jsx(z,{isOpen:o,onClose:()=>d(!1),subcategoryData:x})]})]})}export{P as default};
