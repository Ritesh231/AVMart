import{r as l,j as e}from"./index-DwftglYh.js";import{F as h,a as f}from"./index-D4vZpXvs.js";import{c as u,d as j,e as b}from"./productsApi--YTSQkNk.js";import{V as m}from"./index-BByxZPSn.js";import"./iconBase-BklN5bFW.js";const C=({isOpen:s,onClose:r,productData:a})=>{const[o,{isLoading:d}]=u(),[t,i]=l.useState({name:"",HscCode:"",GstRate:""});l.useEffect(()=>{a&&i({name:a.name||"",HscCode:a.HscCode||"",GstRate:a.GstRate||""})},[a]);const c=n=>{i({...t,[n.target.name]:n.target.value})},x=async()=>{try{await o({id:a._id,...t}).unwrap(),m.success("Product Updated Successfully"),r()}catch{m.error("Update Failed")}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-[400px] p-6 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Edit Product"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Product Name",value:t.name,onChange:c,className:"w-full border p-2 rounded-lg"}),e.jsx("input",{type:"text",name:"HscCode",placeholder:"HSC Code",value:t.HscCode,onChange:c,className:"w-full border p-2 rounded-lg"}),e.jsx("input",{type:"number",name:"GstRate",placeholder:"GST Rate",value:t.GstRate,onChange:c,className:"w-full border p-2 rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-5",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:d?"Updating...":"Update"})]})]})}):null};function y({category:s}){const[r,a]=l.useState(!1),[o,{isLoading:d}]=u(),[t,{isLoading:i}]=j(),[c,x]=l.useState({name:"",HscCode:"",GstRate:""});l.useEffect(()=>{s&&x({name:s.name||"",HscCode:s.HscCode||"",GstRate:s.GstRate||""})},[s]);const n=async g=>{if(window.confirm("Are you sure you want to delete this category?"))try{await t(g).unwrap(),m.success("Category Deleted Successfully")}catch(p){m.error("Error to delete Category",p)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex md:h-32 flex-col sm:flex-row sm:items-center justify-between
        p-4 rounded-xl border border-teal-200 bg-white
        hover:shadow-md transition gap-4`,children:[e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Lipstick_icon.svg/1024px-Lipstick_icon.svg.png",alt:"category",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Subcategories: 10"})]})]}),e.jsxs("div",{className:"flex md:flex-col flex-row sm:items-start gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"142 Products"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>a(!0),className:"p-2 rounded-md bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition",children:e.jsx(h,{size:14})}),e.jsx("button",{className:"p-2 rounded-md bg-red-50 text-red-600 hover:bg-red-100 transition",onClick:()=>n(s._id),children:e.jsx(f,{size:14})})]})]})]}),e.jsx(C,{isOpen:r,onClose:()=>a(!1),productData:s})]})}function R(){const{data:s,isLoading:r,isError:a}=b(),o=s?.data??[],d=()=>e.jsx("div",{className:"p-4 rounded-xl border bg-white animate-pulse",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]})});return r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:Array.from({length:6}).map((t,i)=>e.jsx(d,{},i))}):a?e.jsx("p",{className:"text-red-500",children:"Failed to load categories"}):e.jsx("div",{className:"p-6 bg-[#F8FAFC] rounded-xl border border-teal-200",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:o.map(t=>e.jsx(y,{category:t},t._id))})})}export{R as default};
